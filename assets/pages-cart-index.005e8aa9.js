import{r as t,a4 as e,a5 as o,d as n,a6 as s,b as l,f as a,E as i,h as r,i as c,w as u,F as d,p,V as m,W as g}from"./index-1726c296.js";import{h as I,i as y,j as S,_ as h}from"./delay.70aa4fda.js";import"./index.9de4576a.js";const T="__MESSAGE_OPTION__",f={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",inputValidate:null,showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function P(t,e){const o=e-t,n=Math.random();return t+Math.round(n*o)}function k(t){return I().then((()=>({data:{isNotEmpty:!0,storeGoods:[{storeId:"1000",storeName:"云Mall深圳旗舰店",storeStatus:1,totalDiscountSalePrice:"9990",promotionGoodsList:[{title:"满减满折回归",promotionCode:"MERCHANT",promotionSubCode:"MYJ",promotionId:"159174555838121985",tagText:["满100元减99.9元"],promotionStatus:3,tag:"满减",description:"满100元减99.9元,已减99.9元",doorSillRemain:null,isNeedAddOnShop:0,goodsPromotionList:[{uid:"88888888205468",saasId:"88888888",storeId:"1000",spuId:"12",skuId:"135691622",isSelected:1,thumb:"https://cdn-we-retail.ym.tencent.com/tsr/goods/dz-3a.png",title:"腾讯极光盒子4智能网络电视机顶盒6K千兆网络机顶盒4K高分辨率",primaryImage:"https://cdn-we-retail.ym.tencent.com/tsr/goods/dz-3a.png",quantity:1,stockStatus:!0,stockQuantity:3,price:"9900",originPrice:"16900",tagPrice:null,titlePrefixTags:[{text:"新品"},{text:"火爆"}],roomId:null,specInfo:[{specTitle:"颜色",specValue:"经典白"},{specTitle:"类型",specValue:"经典套装"}],joinCartTime:"2020-06-29T07:55:40.000+0000",available:1,putOnSale:1,etitle:null},{uid:"88888888205468",saasId:"88888888",storeId:"1000",spuId:"18",skuId:"135681631",isSelected:1,thumb:"https://cdn-we-retail.ym.tencent.com/tsr/goods/nz-09a.png",title:"白色短袖连衣裙荷叶边裙摆宽松韩版休闲纯白清爽优雅连衣裙",primaryImage:"https://cdn-we-retail.ym.tencent.com/tsr/goods/nz-09a.png",quantity:1,stockStatus:!0,stockQuantity:177,price:"29800",originPrice:"40000",tagPrice:null,titlePrefixTags:null,roomId:null,specInfo:[{specTitle:"颜色",specValue:"米色荷叶边"},{specTitle:"尺码",specValue:"M"}],joinCartTime:"2020-06-29T07:55:27.000+0000",available:1,putOnSale:1,etitle:null},{uid:"88888888205468",saasId:"88888888",storeId:"1000",spuId:"13",skuId:"135698362",isSelected:1,thumb:"https://cdn-we-retail.ym.tencent.com/tsr/goods/muy-3a.png",title:"带帽午休毯虎年款多功能加厚加大加绒简约多功能午休毯连帽披肩",primaryImage:"https://cdn-we-retail.ym.tencent.com/tsr/goods/muy-3a.png",quantity:13,stockStatus:!0,stockQuantity:9,price:"29900",originPrice:"0",tagPrice:null,titlePrefixTags:[{text:"火爆"}],roomId:null,specInfo:[{specTitle:"颜色",specValue:"浅灰色"},{specTitle:"尺码",specValue:"M"}],joinCartTime:"2020-06-29T07:54:43.000+0000",available:1,putOnSale:1,etitle:null},{uid:"88888888205468",saasId:"88888888",storeId:"1000",spuId:"7",skuId:"135681625",isSelected:1,thumb:"https://cdn-we-retail.ym.tencent.com/tsr/goods/gh-2b.png",title:"不锈钢刀叉勺套装家用西餐餐具ins简约耐用不锈钢金色银色可选",primaryImage:"https://cdn-we-retail.ym.tencent.com/tsr/goods/gh-2b.png",quantity:1,stockStatus:!0,stockQuantity:0,price:"29900",originPrice:"29900",tagPrice:null,titlePrefixTags:null,roomId:null,specInfo:[{specTitle:"颜色",specValue:"奶黄色"},{specTitle:"数量",specValue:"六件套"}],joinCartTime:"2020-06-29T07:55:00.000+0000",available:1,putOnSale:1,etitle:null}],lastJoinTime:"2020-06-29T07:55:40.000+0000"},{title:null,promotionCode:"EMPTY_PROMOTION",promotionSubCode:null,promotionId:null,tagText:null,promotionStatus:null,tag:null,description:null,doorSillRemain:null,isNeedAddOnShop:0,goodsPromotionList:[{uid:"88888888205468",saasId:"88888888",storeId:"1000",spuId:"11",skuId:"135691629",isSelected:0,thumb:"https://cdn-we-retail.ym.tencent.com/tsr/goods/nz-17a.png",title:"运动连帽拉链卫衣休闲开衫长袖多色运动细绒面料运动上衣",primaryImage:"https://cdn-we-retail.ym.tencent.com/tsr/goods/nz-17a.png",quantity:1,stockStatus:!1,stockQuantity:0,price:"25900",originPrice:"39900",tagPrice:null,tagText:null,roomId:null,specInfo:[{specTitle:"颜色",specValue:"军绿色"},{specTitle:"尺码",specValue:"S"}],joinCartTime:"2020-04-24T06:26:48.000+0000",available:1,putOnSale:1,etitle:null},{uid:"88888888205468",saasId:"88888888",storeId:"1000",spuId:"5",skuId:"135691635",isSelected:0,thumb:"https://cdn-we-retail.ym.tencent.com/tsr/goods/dz-2a.png",title:"迷你便携高颜值蓝牙无线耳机立体声只能触控式操作简约立体声耳机",primaryImage:"https://cdn-we-retail.ym.tencent.com/tsr/goods/dz-2a.png",quantity:1,stockStatus:!0,stockQuantity:96,price:"29000",originPrice:"29900",tagPrice:null,tagText:null,roomId:null,specInfo:[{specTitle:"颜色",specValue:"黑色"},{specTitle:"类型",specValue:"简约款"}],joinCartTime:"2020-06-29T07:55:17.000+0000",available:1,putOnSale:1,etitle:null}],lastJoinTime:null}],lastJoinTime:"2020-06-29T07:55:40.000+0000",postageFreePromotionVo:{title:null,promotionCode:null,promotionSubCode:null,promotionId:null,tagText:null,promotionStatus:null,tag:null,description:null,doorSillRemain:null,isNeedAddOnShop:0}}],invalidGoodItems:[{uid:"88888888205468",saasId:"88888888",storeId:"1000",spuId:"1",skuId:"135691631",isSelected:1,thumb:"https://cdn-we-retail.ym.tencent.com/tsr/goods/nz-08b.png",title:"纯色纯棉休闲圆领短袖T恤纯白亲肤厚柔软细腻面料纯白短袖套头T恤",primaryImage:"https://cdn-we-retail.ym.tencent.com/tsr/goods/nz-08b.png",quantity:8,stockStatus:!0,stockQuantity:177,price:"26900",originPrice:"31900",tagPrice:null,tagText:null,roomId:null,specInfo:[{specTitle:"颜色",specValue:"白色"},{specTitle:"尺码",specValue:"S"}],joinCartTime:"2020-04-28T04:03:59.000+0000",available:1,putOnSale:1,etitle:null}],isAllSelected:!1,selectedGoodsCount:16,totalAmount:"179997",totalDiscountAmount:"110000"},code:"Success",msg:null,requestId:`${P(1e5,999999)}.${(new Date).valueOf()}${P(1e3,9999)}.${P(1e7,99999999)}`,clientIp:`10.${P(1,254)}.${P(1,254)}.${P(1,254)}`,rt:269,success:!0})))}const G=h(n({__name:"index",setup(n){const I=t(null);return y(),function(n=""){const s=t(f);e(n?T+n:T,s);const l=t=>e=>{const n=o({type:t},"string"==typeof e?{title:e}:e);return"confirm"===n.type||"prompt"===n.type?n.showCancelButton=!0:n.showCancelButton=!1,a(n)},a=t=>new Promise(((e,n)=>{const l=o(f,"string"==typeof t?{title:t}:t);s.value=o(l,{show:!0,onConfirm:t=>{e(t)},onCancel:t=>{n(t)}})})),i=l("alert"),r=l("confirm"),c=l("prompt")}(),s(),l((()=>{!async function(){const t=await async function(){if(!I.value)return await k();return{data:I.value}}();let e=!0;const o=t.data;for(const n of o.storeGoods){n.isSelected=!0,n.storeStockShortage=!1,n.shortageGoodsList||(n.shortageGoodsList=[]);for(const t of n.promotionGoodsList)t.goodsPromotionList=t.goodsPromotionList.filter((t=>(t.originPrice=void 0,t.quantity>t.stockQuantity&&(n.storeStockShortage=!0),t.isSelected||(n.isSelected=!1),t.stockQuantity>0||(n.shortageGoodsList.push(t),!1)))),t.goodsPromotionList.length>0&&(e=!1);n.shortageGoodsList.length>0&&(e=!1)}o.invalidGoodItems=o.invalidGoodItems.map((t=>(t.originPrice=void 0,t))),o.isNotEmpty=!e,I.value=o}()})),(t,e)=>{const o=p,n=m(g("page-wraper"),S);return a(),i(d,null,[r(" cart gap v-else "),c(n,null,{default:u((()=>[c(o,{class:"cart"},{default:u((()=>[r(" 分层购物车 "),r(' <block v-if="cartGroupData.isNotEmpty"> '),r(' <cart-group\n        :store-goods="cartGroupData.storeGoods"\n        :invalid-good-items="cartGroupData.invalidGoodItems"\n        @selectgoods="onGoodsSelect"\n        @selectstore="onStoreSelect"\n        @changequantity="onQuantityChange"\n        @gocollect="goCollect"\n        @goodsclick="goGoodsDetail"\n        @clearinvalidgoods="clearInvalidGoods"\n        @delete="onGoodsDelete"\n      />\n\n      <view class="gap" /> '),r(" 商品小计以及结算按钮 "),r(' <cart-bar\n        :is-all-selected="cartGroupData.isAllSelected"\n        :total-amount="cartGroupData.totalAmount"\n        :total-goods-num="cartGroupData.selectedGoodsCount"\n        :total-discount-amount="cartGroupData.totalDiscountAmount"\n        :fixed="true"\n        :bottomHeight="112"\n        @handleSelectAll="onSelectAll"\n        @handleToSettle="onToSettle"\n      /> '),r(" </block> "),r(" 购物车空态 "),r(' <cart-empty v-else @handleClick="onGotoHome"  class="v-else"/> ')])),_:1})])),_:1})],2112)}}}),[["__scopeId","data-v-c517dcf6"]]);export{G as default};
